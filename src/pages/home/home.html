<ion-header>
    <ion-navbar>
        <ion-title>
          Connect Club
        </ion-title>
        <ion-buttons end>
            <button ion-button (click)="calluserdetails()">
                <ion-icon name="person"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content class="home">

    <ion-card class="home-card" >      
        <div>
            <ion-row>
                <ion-col col-2>
                    <ion-avatar item-left>
                        <img [src]="profileimage" *ngIf="profileimage" style="height: 40px; width: 40px">
                    </ion-avatar>                                                     
                </ion-col>
                <ion-col col-10 (click)="onCreatePostClick()"> 
                    <button  ion-button clear style="text-transform: none" ><ion-note> Give a challenge to all club and player..</ion-note></button>
                </ion-col>
            </ion-row>
        </div>
    </ion-card>

    <ion-list *ngFor="let post of posts, let i = index">
        <ion-card *ngIf="post.posttype == 'tournament'" class="post">
            <ion-item>
                <ion-avatar item-left>
                    <img [src]="post.userimage" *ngIf="post.userimage">
                </ion-avatar>
                <ion-icon name="more" item-right (click)="onMoreClick($event)"></ion-icon>
                <h2 (click)="onUsernameClick(post.userId)">{{post.username || "Forgot to edit name"}}</h2>

                <p><ion-icon name="pin"></ion-icon><span> </span>Kolkata,Yesterday at 1.20pm</p>
            </ion-item>
            <ion-item>
                <p>Organising a {{post.sporttype}} tournament on {{post.eventdate}}</p>
            </ion-item>
            <ion-row style="height: 250px; width: 100%">
                <img [src]="post.imageurl" *ngIf="post.imageurl">
            </ion-row>
                
            <ion-item>
                <ion-row>
                    <ion-col color="secondary"> Entry Fee: {{post.entryfee}} </ion-col>
                    <ion-col color="secondary"> Prize: {{post.prize}} </ion-col>
                </ion-row>
            </ion-item>
            <ion-row *ngIf="post.userId != authuid">
                <ion-col col-4>
                    <button ion-button icon-left clear small class="tournamentbutton">
                        <ion-icon name="person"></ion-icon>
                        <div>{{post.participating}} Going</div>
                    </button>
                </ion-col>
                <ion-col col-4>
                    <button ion-button icon-left clear small class="tournamentbutton">
                        <ion-icon name="car"></ion-icon>
                        <div>1.4km</div>
                    </button>
                </ion-col>
                <ion-col center text-center col-4>
                    <button ion-button outline class="tournamentbutton" (click)="onRulesClick(post.rules,post.participating,post.$key,post.userId)">
                        Rules <span style="width: 5px"></span>
                        <ion-icon name="arrow-round-forward"></ion-icon>
                    </button>
                </ion-col>
            </ion-row>
            <button *ngIf="post.userId == authuid" (click)="seeParticipants(post.$key,post.participating)" ion-button block outline style="text-transform: none;margin-top: 20px">See all participants</button>
        </ion-card>

        <ion-card *ngIf="post.posttype == 'hiring'" class="post">
            <ion-item>
                <ion-avatar item-left>
                    <img [src]="post.userimage" *ngIf="post.userimage">
                </ion-avatar>
                <ion-icon name="more" item-right (click)="onMoreClick($event)"></ion-icon>
                <h2 (click)="onUsernameClick(post.userId)">{{post.username || "Forgot to edit name"}}</h2>

                <p><ion-icon name="pin"></ion-icon><span> </span>Kolkata,Yesterday at 1.20pm</p>
            </ion-item>
            <ion-item>
                <p>Organising a {{post.sporttype}} <b>Hiring Trial</b> on {{post.eventdate}}</p>
            </ion-item>
            <ion-row style="height: 250px; width: 100%">          
                <img [src]="post.imageurl" *ngIf="post.imageurl">
            </ion-row>
   
            <ion-item>
                <ion-row>
                    <ion-col> Trial Date: {{post.eventdate}} </ion-col>
                    <ion-col color="danger"> **First come First </ion-col>
                </ion-row>
            </ion-item>
            <ion-row *ngIf="post.userId != authuid">
                <ion-col col-4>
                    <button ion-button icon-left clear small class="hiringbutton">
                        <ion-icon name="person"></ion-icon>
                        <div>{{post.participating}} Going</div>
                    </button>
                </ion-col>
                <ion-col col-4>
                    <button ion-button icon-left clear small class="hiringbutton">
                        <ion-icon name="car"></ion-icon>
                        <div>1.4km</div>
                    </button>
                </ion-col>
                <ion-col center text-center col-4>
                    <button ion-button outline class="hiringbutton" (click)="onCriteriaClick(post.criteria,post.participating,post.$key,post.userId)">
                        Criteria <span style="width: 5px"></span>
                        <ion-icon name="arrow-round-forward"></ion-icon>
                    </button>
                </ion-col>
            </ion-row>
            <button *ngIf="post.userId == authuid" (click)="seeParticipants(post.$key,post.participating)" ion-button block outline style="text-transform: none;margin-top: 20px">See all participants</button>
        </ion-card>
        <!-- Hiring post ends here -->

        <ion-card *ngIf="post.posttype == 'image'" class="post"> 
            <ion-item>
                <ion-avatar item-left>
                    <img [src]="post.userimage" *ngIf="post.userimage">
                </ion-avatar>
                <ion-icon name="more" item-right (click)="onMoreClick($event)"></ion-icon>
                <h2 (click)="onUsernameClick(post.userId)">{{post.username || "Forgot to edit name"}}</h2>

                <p><ion-icon name="pin"></ion-icon><span> </span>Kolkata,Yesterday at 1.20pm</p>
            </ion-item>
            <ion-item>
                <p>{{post.title}}</p>
            </ion-item>
            <div>                
                <img [src] ="post.imageurl" style="padding: 5px; height: 250px">
            </div>
            <ion-row>
                <ion-col col-4>
                    <button (click)="likePost(post.$key,i)" ion-button icon-center clear small class="scorebutton">
                        <ion-icon name="thumbs-up" [class.gray-color]="liked[i] == 0" ></ion-icon>
                        <span style="width: 5px"></span>
                        <div [class.gray-color]="liked[i] == 0">{{post.likes}}</div>
                    </button>
                </ion-col>
                <ion-col col-4>
                    <button (click)="dislikePost(post.$key,i)" ion-button icon-center clear small class="scorebutton">
                        <ion-icon name="thumbs-down" [class.gray-color]="disliked[i] == 0" ></ion-icon>
                        <span style="width: 5px"></span>
                        <div [class.gray-color]="disliked[i] == 0">{{post.dislikes}}</div>
                    </button>
                </ion-col>
                <ion-col col-4>
                    <button ion-button icon-center clear small class="scorebutton">
                        <ion-icon name="chatboxes"></ion-icon>
                        <span style="width: 5px"></span>
                        <div>{{post.comments}} </div>
                    </button>
                </ion-col>
            </ion-row>
        </ion-card>

        <ion-card *ngIf="post.posttype == 'score' && post.sporttype == 'cricket' && post.crickettype == 'odi'" class="post">
            <ion-item>
                <ion-avatar item-left>
                   <img [src]="post.userimage" style="height: 40px; width: 40px">
                </ion-avatar>
                <ion-icon name="more" item-right (click)="onMoreClick($event)"></ion-icon>
                <h2 (click)="onUsernameClick(post.userId)">{{post.username || "Forgot to edit name"}}</h2>

                <p><ion-icon name="pin"></ion-icon><span> </span>Kolkata,Yesterday at 1.20pm</p>
            </ion-item>
            <ion-title>
                 Cricket Score Update:
            </ion-title>
            <ion-item>
                <ion-label>{{post.teamone}} vs {{post.teamtwo}}</ion-label>
            </ion-item>
            <ion-item *ngIf="post.tosswon == 'teamone'">
                <ion-label>{{post.teamone}} won toss and elected {{post.elected}} first </ion-label>
            </ion-item>
            <ion-item *ngIf="post.tosswon == 'teamtwo'">
                <ion-label>{{post.teamtwo}} won toss and elected {{post.elected}} first </ion-label>
            </ion-item>
            <button *ngIf="(post.tosswon == 'teamone' && post.elected == 'batting') || (post.tosswon == 'teamtwo' && post.elected == 'bowling')" ion-button clear full style="text-transform: none">
                {{post.teamone}} <span style="width: 5px"></span>
                <ion-icon name="happy"></ion-icon>
            </button>
            <button *ngIf="(post.tosswon == 'teamtwo' && post.elected == 'batting') || (post.tosswon == 'teamone' && post.elected == 'bowling')" ion-button clear full style="text-transform: none">
                {{post.teamtwo}} <span style="width: 5px"></span>
                <ion-icon name="happy"></ion-icon>
            </button>
            <ion-row>
                <ion-col col-3></ion-col>
                <ion-col col-5>Runs Scored :</ion-col>
                <ion-col col-3>{{post.runsscored}} </ion-col>
                <ion-col col-1></ion-col>
            </ion-row>
            <ion-row>
                <ion-col col-3></ion-col>
                <ion-col col-5>Wicket Lost :</ion-col>
                <ion-col col-3>{{post.wickets}} </ion-col>
                <ion-col col-1></ion-col>
            </ion-row>
            <ion-row>
                <ion-col col-3></ion-col>
                <ion-col col-5>Overs Bowled :</ion-col>
                <ion-col col-3>{{post.overs}} </ion-col>
                <ion-col col-1></ion-col>
            </ion-row>
            <br>
            <ion-row>
                <ion-col col-4>
                    <button (click)="likePost(post.$key,i)" ion-button icon-center clear small class="scorebutton">
                        <ion-icon name="thumbs-up" [class.gray-color]="liked[i] == 0" ></ion-icon>
                        <span style="width: 5px"></span>
                        <div [class.gray-color]="liked[i] == 0">{{post.likes}}</div>
                    </button>
                </ion-col>
                <ion-col col-4>
                    <button (click)="dislikePost(post.$key,i)" ion-button icon-center clear small class="scorebutton">
                        <ion-icon name="thumbs-down" [class.gray-color]="disliked[i] == 0"></ion-icon>
                        <span style="width: 5px"></span>
                        <div [class.gray-color]="disliked[i] == 0">{{post.dislikes}}</div>
                    </button>
                </ion-col>
                <ion-col col-4>
                    <button ion-button icon-center clear small class="scorebutton">
                        <ion-icon name="chatboxes"></ion-icon>
                        <span style="width: 5px"></span>
                        <div>{{post.comments}} </div>
                    </button>
                </ion-col>
            </ion-row>
        </ion-card>

    </ion-list>
</ion-content>
